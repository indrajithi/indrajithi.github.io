<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Music Visualizer in C Using OpenGL | Blog of Indrajith Indraprastham</title><meta name=keywords content="OpenGL"><meta name=description content="For the given input audio file (.wav) the program will give the real time audio spectrum by performing Fast Fourier Transform (FFT) on the audio samples and plot the graph using OpenGL."><meta name=author content="Indrajith Indraprastham"><link rel=canonical href=https://indrajith.me/posts/music-visualizer-in-c-using-opengl/><link crossorigin=anonymous href=/assets/css/stylesheet.min.65aebb33e4f0ce3d1a39e4a35c11b91eb08b582489fca0f78f9227d90ac72a52.css integrity="sha256-Za67M+Twzj0aOeSjXBG5HrCLWCSJ/KD3j5In2QrHKlI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://indrajith.me/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://indrajith.me/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://indrajith.me/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://indrajith.me/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://indrajith.me/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.1"><meta property="og:title" content="Music Visualizer in C Using OpenGL"><meta property="og:description" content="For the given input audio file (.wav) the program will give the real time audio spectrum by performing Fast Fourier Transform (FFT) on the audio samples and plot the graph using OpenGL."><meta property="og:type" content="article"><meta property="og:url" content="https://indrajith.me/posts/music-visualizer-in-c-using-opengl/"><meta property="og:image" content="https://indrajith.me/dp.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-05-25T21:01:43+05:30"><meta property="article:modified_time" content="2016-05-25T21:01:43+05:30"><meta property="og:site_name" content="Blog of Indrajith Indraprastham"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://indrajith.me/dp.jpg"><meta name=twitter:title content="Music Visualizer in C Using OpenGL"><meta name=twitter:description content="For the given input audio file (.wav) the program will give the real time audio spectrum by performing Fast Fourier Transform (FFT) on the audio samples and plot the graph using OpenGL."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://indrajith.me/posts/"},{"@type":"ListItem","position":2,"name":"Music Visualizer in C Using OpenGL","item":"https://indrajith.me/posts/music-visualizer-in-c-using-opengl/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Music Visualizer in C Using OpenGL","name":"Music Visualizer in C Using OpenGL","description":"For the given input audio file (.wav) the program will give the real time audio spectrum by performing Fast Fourier Transform (FFT) on the audio samples and plot the graph using OpenGL.","keywords":["OpenGL"],"articleBody":"Audio Visualizer For the given input audio file (.wav) the program will give the real time audio spectrum by performing Fast Fourier Transform (FFT) on the audio samples and plot the graph using OpenGL. This Project is implemented in C++ using OpenGL. Three frameworks Aquila-dsp, Kiss-Fft, and SFML are used to perform audio sampling, fast fourier transform and audio playback respectively. The development and testing of this project is done on Linux (ubuntu) using 4.2.0-16-generic Kernel. Interface for the program is given with the help of keyboard.\nFrameworks / APIs used  The following c++ frameworks are used in this project. 2 Simple and Fast Multimedia Library (SFML) Aquila-dsp Kiss-fft OpenGL  Minimum requirements: The development of the project was done with these requirements. The can support lower versions also. It has not been tested.\n C++ compiler : g++ with c++11 support (-std=gnu++11) (version = 5.2.1) OpenGL (version =v4.5) Aquila-dsp framework (version =v3.0) Kiss-fft Framework (version =v1.3.0) SFML framework =2.3.2 Git =v2.5.0  Keys Used: Use `Left/Right` to move horizontally. Use `Up/Down` to change the horizontal scale. Use `Home` button to reset the position and scale. Press ` F7 ` to toggle interpolation. Press `F8` to toggle clamping. Press `F9` to toggle drawing points. Press `q` to exit the program. Press `p` to to toggle audio play/pause. Press `r` to reload audio and play from the beginning. Press `right arrow` to seek audio forward by 5 seconds and move +ve x axis. Press `left arrow` to seek audio backward by 5 seconds and move -ve x axis. Press `down arrow` to decrease scale/1.5. Press `up arrow` to increase scale*1.5. Algorithm Step 1: Begin Int framePointer = 0, N = 32768. Step 2: Load input audio file and play it using the audio Library Step 3: For i = framePointer to → framePointer + N = total_samples_count Exit. Else goto Step 3. Step 10: End. ## Flow Chart Compiling the frameworks Aquila-dsp: Prerequisites\nCMake: Aquila relies on CMake as a build tool, so make sure you have it installed (version 2.8 or later) Clone repository.\ngit clone git://github.com/zsiciarz/aquila.git aquila-src Buid\nWhere to build:\na-top-level-directory/ aquila-build/ aquila-src/ In directory you have to build do\ncmake ..\\aquila-src -DCMAKE_INSTALL_PREFIX=”~/home/mylib” make make install SFLM:\nInstalling SFML is simple. You need administrative privilege on the machine\nsudo apt-get install libsfml-dev Kiss FFT\nThere is no need to build kiss-fft. You need to add their files while compiling\nCompiling and running Clone the project from here: git clone git@github.com:indrajithi/Audio-Visualizer.git\nFor easy compilation use the script ./compile from the project directory\ng++ -std=c++11 -c draw.cpp g++ -std=gnu++11 draw.o \\ kiss_fft130/kiss_fft.c \\ -L /home//mylib/lib/ \\ -lAquila -lOoura_fft -lm \\ -lglut -lGLEW -lGL -lGLU \\ -lfreetype -lsfml-system \\ -lsfml-audio ./common/shader_utils.o \\ -o draw To run the project: ./draw  Full Source Code.\n","wordCount":"551","inLanguage":"en","datePublished":"2016-05-25T21:01:43+05:30","dateModified":"2016-05-25T21:01:43+05:30","author":{"@type":"Person","name":"Indrajith Indraprastham"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://indrajith.me/posts/music-visualizer-in-c-using-opengl/"},"publisher":{"@type":"Organization","name":"Blog of Indrajith Indraprastham","logo":{"@type":"ImageObject","url":"https://indrajith.me/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://indrajith.me/ accesskey=h title="< /> (Alt + H)">&lt; /></a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://indrajith.me/>Home</a>&nbsp;»&nbsp;<a href=https://indrajith.me/posts/>Posts</a></div><h1 class=post-title>Music Visualizer in C Using OpenGL</h1><div class=post-description>For the given input audio file (.wav) the program will give the real time audio spectrum by performing Fast Fourier Transform (FFT) on the audio samples and plot the graph using OpenGL.</div><div class=post-meta>May 25, 2016&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Indrajith Indraprastham</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#audio-visualizer aria-label="Audio Visualizer">Audio Visualizer</a><ul><li><a href=#frameworks--apis-used aria-label="Frameworks / APIs used">Frameworks / APIs used</a></li><li><a href=#minimum-requirements aria-label="Minimum requirements:">Minimum requirements:</a></li><li><a href=#keys-used aria-label="Keys Used:">Keys Used:</a></li><li><a href=#algorithm aria-label=Algorithm>Algorithm</a></li><li><a href=#compiling-the-frameworks aria-label="Compiling the frameworks">Compiling the frameworks</a></li><li><a href=#aquila-dsp aria-label=Aquila-dsp:>Aquila-dsp:</a></li><li><a href=#compiling-and-running aria-label="Compiling and running">Compiling and running</a></li></ul></li></ul></div></details></div><div class=post-content><p><img loading=lazy src=/spectrum.gif alt="Audio Visualizer" title="Screenshot of spectrum"></p><h1 id=audio-visualizer>Audio Visualizer<a hidden class=anchor aria-hidden=true href=#audio-visualizer>#</a></h1><p>For the given input audio file <strong>(.wav)</strong> the program will give the <strong>real time audio spectrum</strong> by performing <strong>Fast Fourier Transform (FFT)</strong> on the audio samples and plot the graph using <strong>OpenGL</strong>.
This Project is implemented in C++ using OpenGL. Three frameworks <strong>Aquila-dsp</strong>, <strong>Kiss-Fft</strong>, and <strong>SFML</strong> are used to perform audio sampling, fast fourier transform and audio playback respectively. The development and testing of this project is done on <strong>Linux (ubuntu)</strong> using 4.2.0-16-generic Kernel. Interface for the program is given with the help of keyboard.</p><h2 id=frameworks--apis-used>Frameworks / APIs used<a hidden class=anchor aria-hidden=true href=#frameworks--apis-used>#</a></h2><ol><li>The following c++ frameworks are used in this project.
2 Simple and Fast Multimedia Library (SFML)</li><li>Aquila-dsp</li><li>Kiss-fft</li><li>OpenGL</li></ol><h2 id=minimum-requirements>Minimum requirements:<a hidden class=anchor aria-hidden=true href=#minimum-requirements>#</a></h2><p>The development of the project was done with these requirements. The can support lower versions also. It has not been tested.</p><ul><li>C++ compiler : g++ with c++11 support (-std=gnu++11) (version >= 5.2.1)</li><li>OpenGL (version >=v4.5)</li><li>Aquila-dsp framework (version >=v3.0)</li><li>Kiss-fft Framework (version >=v1.3.0)</li><li>SFML framework >=2.3.2</li><li>Git >=v2.5.0</li></ul><h2 id=keys-used>Keys Used:<a hidden class=anchor aria-hidden=true href=#keys-used>#</a></h2><pre><code>Use `Left/Right` to move horizontally.
        Use `Up/Down` to change the horizontal scale.
        Use `Home` button to reset the position and scale.
        Press ` F7 ` to toggle interpolation.
        Press  `F8` to toggle clamping.
Press `F9` to toggle drawing points.
        Press `q` to exit the program.
        Press `p` to to toggle audio play/pause.
        Press `r` to reload audio and play from the beginning.    
Press `right arrow` to seek audio forward by 5 seconds and move +ve x axis.
Press `left arrow` to seek audio backward by 5 seconds and move -ve x axis.
Press `down arrow` to decrease scale/1.5.
Press `up arrow` to increase scale*1.5.
</code></pre><h2 id=algorithm>Algorithm<a hidden class=anchor aria-hidden=true href=#algorithm>#</a></h2><pre><code>Step 1: Begin
		Int framePointer = 0, N = 32768.
Step 2: Load input audio file and play it using the audio Library
Step 3: For i = framePointer to →  framePointer + N &lt; total_samples_count
		Collect N samples from the audio file 
Step 4: Apply suitable window function (e.g. Hann aka Hanning window)
Step 5: Apply Fast Fourier transform (FFT) on the array elements and collect N/2 
		Complex numbers having real part and imaginary part. 
		(NB: if using typical complex-to-complex FFT then set imaginary parts 
		of input array to zero)
Step 6: Calculate the magnitude of N/2FFT data.
		magnitude = sqrt(re * re +img *img) 
Step 7: Convert magnitude to dB (log)scale. (optional)
		20 * log10(magnitude)
Step 8: Plot N/2  log(magnitude)values.
Step 9: If N &gt;= total_samples_count 
        Exit. 
        Else goto Step 3.
Step 10: End.
## Flow Chart
</code></pre><p><img loading=lazy src=/flowchart.png alt="Flow Chart" title=Flowchart></p><h2 id=compiling-the-frameworks>Compiling the frameworks<a hidden class=anchor aria-hidden=true href=#compiling-the-frameworks>#</a></h2><h2 id=aquila-dsp>Aquila-dsp:<a hidden class=anchor aria-hidden=true href=#aquila-dsp>#</a></h2><p><strong>Prerequisites</strong></p><p>CMake: Aquila relies on CMake as a build tool, so make sure you have it installed (version 2.8 or later)
Clone repository.</p><pre><code>git clone git://github.com/zsiciarz/aquila.git aquila-src
</code></pre><p><strong>Buid</strong></p><p>Where to build:</p><pre><code>a-top-level-directory/
   aquila-build/
   aquila-src/
</code></pre><p>In directory you have to build do</p><pre><code>cmake ..\aquila-src
    -DCMAKE_INSTALL_PREFIX=”~/home/mylib”
make
make install
</code></pre><p><strong>SFLM:</strong></p><p>Installing SFML is simple. You need administrative privilege on the machine</p><pre><code>sudo apt-get install libsfml-dev
</code></pre><p><strong>Kiss FFT</strong></p><p>There is no need to build kiss-fft. You need to add their files while compiling</p><h2 id=compiling-and-running>Compiling and running<a hidden class=anchor aria-hidden=true href=#compiling-and-running>#</a></h2><p>Clone the project from here: <code>git clone git@github.com:indrajithi/Audio-Visualizer.git</code></p><p>For easy compilation use the script <code>./compile</code> from the project directory</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>g++ -std<span style=color:#f92672>=</span>c++11 -c draw.cpp
g++ -std<span style=color:#f92672>=</span>gnu++11 draw.o  <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>kiss_fft130/kiss_fft.c  <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>-L /home/&lt;YourUserName&gt;/mylib/lib/ <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>-lAquila -lOoura_fft -lm <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>-lglut -lGLEW -lGL -lGLU  <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>-lfreetype -lsfml-system <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>-lsfml-audio  ./common/shader_utils.o <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>-o draw
To run the project: 
./draw &lt;audio-input&gt;
</code></pre></div><p><strong><a href=https://github.com/indrajithi/Audio-Visualizer>Full Source Code.</a></strong></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://indrajith.me/tags/opengl/>OpenGL</a></li></ul><nav class=paginav><a class=prev href=https://indrajith.me/posts/machine-learning-pproach-to-classify-music-based-on-genre/><span class=title>« Prev Page</span><br><span>Machine Learning Approach to Classify Music Based on Genre</span></a>
<a class=next href=https://indrajith.me/posts/jumble-words-solver-in-python/><span class=title>Next Page »</span><br><span>Jumble Words solver using Python</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://indrajith.me/>Blog of Indrajith Indraprastham</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>